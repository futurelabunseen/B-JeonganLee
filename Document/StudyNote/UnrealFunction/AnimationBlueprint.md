# 애니메이션 블루프린트

- [애니메이션 블루프린트 공식문서](https://docs.unrealengine.com/5.0/en-US/animation-blueprints-in-unreal-engine/)
- [가장 이해가 잘된 시리즈](https://www.youtube.com/watch?v=etRZu5UG_S0)

## 애니메이션 블루프린트란?

언리얼의 특징적인 기능중 하나로 애니메이션 StateMachine과 내부 블루프린트 로직을 활용하여 캐릭터의 애니메이션을 제어하는 기능이다.

유니티와 가장 큰 차이점은 코드 자체에 애니메이션 제어가 들어갈 필요가 없다는 점이 매우 매력적이다. (물론 유니티도 에디터를 손보거나 플러그인, 애니메이션에 State머신 자체에 CS를 두면 가능하다고 알고 있다.)

언리얼은 대부분 C++로 제작하는 것이 좋다고 하지만, 애니메이션은 블루프린트로 제작하는 것이 더 효율적이다. 구조는 `EventGraph`, `AnimGraph`로 나뉘며, `EventGraph`는 애니메이션 이벤트를 처리하고, `AnimGraph`는 애니메이션 노드를 처리한다.

### EventGraph

대부분은 여기서 Actor의 값을 받아와서 속도나 방향을 저장한다. (즉, 애니메이션 그래프에서 사용할 값을 여기서 캐싱하거나 실시간 Tick을 통해 값을 업데이트한다.)

### AnimGraph

실제 StateMachine이나 애니메이션 노드를 처리하는 곳이다. 여기서 애니메이션 노드를 추가하거나, 노드를 연결하거나, 노드의 값을 조작할 수 있다.

### BlendSpace

유니티의 BlendTree와 비슷한 개념으로, 여러 애니메이션을 블렌딩하여 사용할 수 있다. (예를 들어, 걷기와 뛰기를 블렌딩하여 사용할 수 있다.)

언리얼은 3D 게임 특성 상 더 자주 활용될 수 있기에 더 세밀한 조작들이 가능한데, 2D좌표계를 사용하여 계산이 가능하다는 점을 이용해 마치 3D 원통형을 두고 애니메이션을 적절하게 블랜딩 가능하다.

### AimOffset

총을 들고 있는 캐릭터의 경우, AimOffset을 사용하여 총을 들고 있는 상태에서의 애니메이션을 적용할 수 있다. (총을 들고 있는 상태에서의 애니메이션을 적용할 수 있다.)

*애니메이션 혼합*

내부에서 설정하는 방법은 BlendSpace와 동일하게 2D 좌표계로 값을 설정하고, AnimGraph에서 해당 값을 받아와서 처리한다.

### Animations montage

애니메이션 몽타주는 여러 애니메이션을 하나로 묶어서 처리할 수 있는 기능이다. 대부분 몽타주에 이벤트를 추가하여 애니메이션 이벤트를 처리한다.

내부에 Notify나 애니메이션의 연결된 동작을 만들기 위해서 사용한다.

#### Anim Notify

Anim Notify라는 클래스는 애니메이션에 이벤트를 걸어서 사용하기 위함으로 주로 사운드, FX, 이펙트를 처리할 때 사용한다.

상속받아 추가구현을 통해 확장이 가능함(총구에서 총알이 나가는 타이밍)
