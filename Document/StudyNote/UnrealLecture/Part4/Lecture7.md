# 7강 : 게임플레이 이펙트의 활용

- 강의 목표
  - 게임플레이 이펙트의 다양한 활용 방법에 대한 이해
  - 데이터 태그의 설정과 활용 방법의 학습
  - 메타 어트리뷰트의 설정과 활용 방법의 학습
  - 레벨에 따른 커브 데이터의 설정과 활용방법의 학습

## 게임플레이 이펙트

- 줄여서 GE로 불린다.
- GAS는 게임에 영향을 주는 객체를 별도로 분리해서 관리한다.
- 게임에 영향을 준다는 것은 대부분 게임 데이터를 변경한다는 것을 의미함
- 따라서 대부분 게임플레이 이펙트와 어트리뷰트는 함께 동작하도록 구성되어 있다.
- GAS 시스템에서 가장 많은 기능을 제공하는 클래스
- 세 가지 타입 중 하나를 선택할 수 있다.
  - Instant: 즉시 적용되는 이펙트 (한 프레임에 적용)
  - Duration: 지속 시간이 있는 이펙트 (지속 시간동안 적용)
  - Infinite: 무한히 지속되는 이펙트 (해제될 때까지 적용)
- 이외에도 정말 다양하게 많은 옵션을 제공한다.

*잘 활용하면 매우 강력한 기능을 제공한다.*

## 게임플레이 이펙트 모디파이어(MODIFIER)

- GE에서 어트리뷰트의 변경 방법을 지정한 설정을 의미한다.
- 모디파이어의 사용 방법
  - 적용할 어트리뷰트의 지정
  - 적용 방식의 설정: 더하기, 빼기, 곱하기, 나누기
- 모디파이어의 계산 방법
  - ScalableFloat: 실수 (데이터 테이블과 연동 가능)
  - AttributeBased: 특정 어트리뷰트에 기반
  - CustomCalculationClass: 계산을 담당하는 전용 클래스의 활용
  - SetByCaller: 데이터 태그를 활용한 데이터 전달
- 모디파이어 없이 자체 계산 로직을 만드는 것도 가능(GameplayEffectExecutionCalculation 클래스를 상속받아 구현)

*C++로 구현하기엔 문법이 복잡하고 어려운 부분이 많다. 따라서 블루프린트로 구현하는 것이 편리하다.*

## 메타(META) 어트리뷰트

- 어트리뷰트의 설정을 위해 사전에 미리 설정하는 임시 어트리뷰트
- 체력을 바로 깎지 않고, 대미지를 통해 체력을 감소하도록 설정
  - 체력은 일반 어트리뷰트, 대미지는 메타 어트리뷰트
- 대미지를 사용하는 경우 기획 추가에 유연한 대처가 가능
  - 무적 기능의 추가
  - 실드 기능의 추가
  - 콤보 진행시 공격력 보정 기능 추가
- 메타 어트리뷰트는 적용 후 바로 0으로 값을 초기화하도록 설정
- 메타 어트리뷰트는 리플리케이션에서 제외시키는 것이 일반적

## 레벨과 커브 테이블

- 게임플레이 이펙트에는 추가적으로 레벨 정보를 저장할 수 있다.
- 게임플레이 이펙트에 저장된 레벨 정보를 사용해 데이터 테이블에서 특정 값을 가져올 수 있다.
- ScalableFloat 모디파이어 타입에서 이를 사용하는 것이 가능
- 이를 활용해 다양한 기능을 구현하는 것이 가능하다.
  - 콤보 추가시 증가하는 요율을 반영해 최종 대미지를 계산
  - 현재 캐릭터 레벨에 따른 초기 스탯 적용
- 커브테이블은 언리얼 에디터를 통해 쉽게 제작 가능

## 게임플레이 이펙트의 생성 과정

- 게임플레이 이펙트 컨텍스트와 게임플레이 이펙트 스펙을 통해 생성할 수 있다.
- 게임플레이 이펙트 스펙: GE에 관련된 정보를 담고 있는 객체
  - 레벨, 모디파이어 및 각종 태그에 대한 정보
  - 게임플레이 이펙트 컨텍스트 핸들
- ASC는 각 데이터를 핸들 객체를 통해 간접적으로 관리한다.
- 따라서 이펙트 컨텍스트 핸들을 만든 후, 이펙트 스펙 핸들을 생성하는 순서로 진행되어야 한다.

## 정리

- 인스턴스 게임플레이 이펙트를 사용한 체력 감소 기능의 구현
- 데이터 태그의 활용하는 등 다양한 방법으로 체력 감소 기능을 구현
- 대미지 메타 어트리뷰트를 활용한 체력 감소 기능의 구현
- 레벨과 커브테이블을 활용한 대미지 구현
- 캐릭터 레벨에 따른 초기 어트리뷰트 설정기능의 구현
