# 11강: 행동트리 모델의 이해

- 강의 목표
  - 행동 트리 모델의 역사를 살펴보고 행동 트리 모델이 가진 장점을 이해
  - 행동 트리 모델의 구성 요소와 이를 활용한 설계 방법의 학습
- 강의 과제
  - 가상의 NPC의 행동 시나리오를 만들고 이를 구현하기 위한 행동트리 모델을 설계하시오

## 행동 트리 모델 개요

### 행동 트리 모델의 역사

2004년 헤일로 2의 인공지능을 설계하는 데 사용되었다가 2005년 GDC에서 발표를 통해 퍼졌다. 지금은 우선순위와 트리 구조를 사용해 인공지능을 설계하는 기법으로 활용된다. (게임산업)

### 행동 트리 모델의 장점

행동 트리 모델은 FSM이 가지고 있던 고질적인 문제를 해결하는 새로운 모델로 모듈화가 잘 되어 있고, 트리 기반으로 계층화가 되어 있어 복잡한 인공지능도 쉽게 설계할 수 있다. 다이어그램으로 인공지능 모델을 효과적으로 표현할 수 있다. 제공되는 여러 편리한 부가 기능을 활용해 다양한 상황에 대해 손쉽게 제어할 수 있다.

### 행동 트리 모델의 구성 요소

루트 형태로 root부터 시작하여 항상 왼쪽에 있는 노드에 우선 순위를 부여한다. 시작 상태를 설정할 필요 없이 왼쪽에서부터 깊이 우선 탐색을 시작한다.

행동을 중심으로 설계하며, 부모 노드에서 다수의 행동을 컨트롤 한다. 이를 컴포짓(composite) 노드라고 한다. 아래 노드의 성격에 따라 달라진다.

- 셀렉터: 여러 행동 중 하나의 행동을 지정
- 시퀀스: 여러 행동을 모두 수행
- 패러렐: 여러 행동을 함께 수행

행동에 대한 결과는 성공, 실패, 중지, 진행 중으로 나뉘며 각 컴포짓 노드마다 다른 행동 결과를 처리한다.

컴포짓 노드에는 부가 기능으로 데코레이터, 서비스, 관찰자 중단을 추가적으로 붙여서 사용이 가능하다.

- 데코레이터: 컴포짓 노드가 실행되는 조건을 지정
- 서비스: 컴포짓 노드가 활성화될 때 주기적으로 실행하는 부가 명령
- 관찰자 중단: 데코레이터 조건에 부합하면 컴포짓 내 활동을 모두 중단

## 정리

- 행동 트리 모델이 강지는 장점
- 행동 트리 모델의 구성요소와 설계 방법
- 언리얼 엔진의 행동 트리를 구동시키기 위한 기본 설정
