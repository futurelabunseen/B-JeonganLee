# 10강: 게임데이터 관리

- 강의 목표
  - 게임 데이터를 관리하는 싱글톤 객체의 등록
  - 엑셀 데이터 및 INI 파일을 활용한 게임 데이터의 관리
  - 액터의 초기화를 위한 지연 생성 기능의 이해와 활용
- 강의 과제
  - 현재 프로젝트에서 싱글톤 오브젝트를 활용할 수 있는 방법에 대해 생각하시오.
  - 엑셀이나 INI 파일을 사용해 게임에 사용되는 데이터를 로드하고 이를 적용한 기믹을 고안하시오.

## 데이터 기반의 게임 시스템 구축

### 엑셀 데이터 임포트

DataAsset과 유사하게 FTableRowBase를 상속받은 구조체를 선언하여 사용할 수 있다. 이후에 엑셀의 Name 컬럼을 제외한 컬럼과 동일한 UPROPERTY를 선언하면 엑셀 데이터를 불러와서 사용할 수 있다. (CSV로 익스포트한 후 엔진에서 불러올 수 있다.)

### 데이터를 관리할 싱글톤 클래스의 설정

- 언리얼 엔진에서 제공하는 싱글톤 클래스
  - 게임 인스턴스
  - 에셋 매니저
  - 게임 플레이 관련 액터 (게임모드, 게임 스테이트)
  - 프로젝트에 싱글톤으로 등록한 언리얼 오브젝트
- **생성자에서 사용하지 않도록 주의**

### SpawnActorDeferred

- 액터의 초기화를 지연시키는 함수

라이프 서클끼리의 경합을 방지하기 위해서 사용한다. (예를 들어, BeginPlay에서 초기화를 하는데, 다른 액터가 먼저 초기화되어야 하는 경우)

## 정리

- 외부 데이터 파일로부터 게임 데이터를 관리하는 다양한 방법의 학습
  - 엑셀의 CSV을 읽어서 사용한다. State의 각각 데이터를 활용할 수 있음
  - ini파일을 읽어서 사용한다.
- 데이터를 관리하는 싱글톤 클래스 생성 방법의 이해
  - 추가적으로 사용자 정의 싱글톤을 정의하고 에디터에서 지정하여 사용할 수 있다.
  - GEngine으로 접근
- 데이터 테이블 기반의 캐릭터 스탯 시스템 구축
  - 한 데이터(구조체)를 담는 테이블도 언리얼 엔진에서 제공한다.
- 지연 생성을 활용한 액터 초기화 방법의 이해
  - BeginPlay에서 초기화를 하는데, 다른 액터가 먼저 초기화되어야 하는 경우 사용한다.
  - `SpawnActorDeferred` 함수를 사용한다.