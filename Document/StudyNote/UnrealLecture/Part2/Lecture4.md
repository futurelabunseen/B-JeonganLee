# 4강: 캐릭터 애니메이션 설정

- 강의 목표
  - 캐릭터의 애니메이션 시스템을 생성하는 방법의 학습
  - 캐릭터의 애니메이션 시스템을 효과적으로 설계하는 방법의 학습
- 강의 과제
  - 자신의 게임에 등장하는 캐릭터의 행동을 기획하고 이를 구현한 애니메이션 블루프린트를 정리하시오

## 새로운 캐릭터 제작

### 캐릭터 애니메이션 시스템의 생성

- 스켈레탈 메시 컴포넌트의 애니메이션 블루프린트 클래스를 지정한다
- 캐릭터가 초기화될 때 `AnimInstance` 클래스의 인스턴스를 생성한다
- 캐릭터는 `GetAnimInstance()` 함수를 사용해 애니메이션을 얻을 수 있다
- 애니메이션 인스턴스는 `GetOwningActor()` 함수를 사용해 자신이 소유한 액터 정보를 얻을 수 있다

### AnimInstance

애니메이션 블루프린트는 이벤트 그래프와 Anim 그래프의 두 영역으로 분리되어 있다. 이벤트 그래프는 이벤트로부터 상태를 파악할 수 있는 주요 변수를 지정하는데 사용한다. Anim 그래프는 저장된 변수로부터 지정된 상태의 애니메이션을 재생한다. 애님 그래프의 복잡한 상태는 `State Alias`로 분리해 효과적으로 설계할 수 있다.

- 이벤트 그래프에서 `NativeInitalizeAnimation`라는 함수가 발생하면 `GetOwningActor()` 함수를 사용해 액터 정보를 가져와 현재 캐릭터(액터)를 살펴보고 지정한 변수를 저장한다. 이 애니메이션에 저장된 변수를 애니메이션 그래프에서 할용하게 된다. (FSM에 맞게 사용하지만 복잡해진다. 따라서 언리얼에서는 `State Alias`를 사용하여 벗어나고자 함.)

## 정리

- `C++`클래스를 상속받은 애니메이션 블루프린트의 생성 방법의 이해
- 이벤트 그래프와 애님 그래프로 구성된 애니메이션 블루프린트의 구조 파악
- 애님 그래프를 사용한 애니메이션 시스템의 설계 방법의 학습
